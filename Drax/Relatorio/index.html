<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Platform Video Pro</title>
    <meta name="description" content="AI-powered app for creating and distributing videos across multiple TikTok and Instagram accounts">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/vue@3.5.13/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body class="bg-gray-100 min-h-screen">
    <div id="app" class="container mx-auto px-4 py-8">
        <!-- Top Navigation Bar -->
        <nav class="fixed top-0 left-0 right-0 bg-purple-500 text-white py-3 px-6 shadow-md z-40">
            <div class="flex justify-between items-center">
                <div class="flex items-center">
                    <button @click="toggleSidebar" class="text-white hover:text-gray-200 focus:outline-none mr-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                    <span class="font-bold text-xl" style="font-family: 'Bricolage Grotesque', sans-serif;">STACK</span>
                </div>
            </div>
        </nav>
        
        <header class="text-center mb-12">
            <!-- Header content -->
            
            
            
            <!-- Sidebar Menu -->
            <div v-if="sidebarOpen" class="fixed inset-0 z-50 flex">
                <!-- Backdrop -->
                <div @click="toggleSidebar" class="fixed inset-0 bg-black bg-opacity-50"></div>
                
                <!-- Sidebar -->
                <div class="relative flex-1 flex flex-col max-w-xs w-full bg-white shadow-xl">
                    <div class="absolute top-0 right-0 pt-2 pr-2">
                        <button @click="toggleSidebar" class="text-gray-500 hover:text-gray-900">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                    <div class="p-4 pt-10 space-y-4 text-gray-800">
                        <button @click="showConfigModal = true; toggleSidebar()" class="w-full text-left px-4 py-2 bg-purple-100 hover:bg-purple-200 rounded">Account Configuration</button>
                        <button @click="showLicenseModal = true; toggleSidebar()" class="w-full text-left px-4 py-2 bg-purple-100 hover:bg-purple-200 rounded">License Management</button>
                        <button @click="showProfileModal = true; toggleSidebar()" class="w-full text-left px-4 py-2 bg-purple-100 hover:bg-purple-200 rounded">Account Profile</button>
                        <div class="flex items-center justify-between px-4 py-2 bg-purple-100 hover:bg-purple-200 rounded">
                            <span class="flex items-center">
                                Dark Mode
                            </span>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" v-model="darkMode" class="sr-only peer" @change="toggleDarkMode">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
                                </svg>
                                <div class="w-11 h-6 bg-gray-400 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600 relative"><span class="absolute inset-0 flex items-center justify-start ml-1 text-x text-white" :class="{'opacity-0': !darkMode}">⚪️</span><span class="absolute inset-0 flex items-center justify-end pr-1 text-x text-gray-700" :class="{'opacity-0': darkMode}">⚪️</span></div>
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
                                </svg>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <h1 class="text-4xl font-bold text-gray-800 dark:text-gray-100 disabled:bg-gray-400 mb-4" style="font-family: 'Bricolage Grotesque', sans-serif;">
                Multi-Platform Video Pro
            </h1>
            <p class="text-gray-600 dark:text-gray-100 disabled:bg-gray-400" style="font-family: 'Bricolage Grotesque', sans-serif;">
                Create and distribute videos across multiple social media accounts
            </p>

        </header>

        <div class="grid md:grid-cols-2 gap-8">
            <!-- Video Creation Section -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-semibold mb-4" style="font-family: 'Bricolage Grotesque', sans-serif;">Create Video</h2>
                <div class="space-y-4">
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center" 
                         @drop.prevent="handleDrop"
                         @dragover.prevent
                         :class="{'border-blue-500': isDragging}">
                        <input type="file" ref="fileInput" @change="handleFileSelect" class="hidden" accept="image/*">
                        <button @click="$refs.fileInput.click()" class="bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600">
                            Upload Image
                        </button>
                        <p class="mt-2 text-sm text-gray-500">or drag and drop your image here</p>
                    </div>
                    
                    <div v-if="selectedImage" class="mt-4">
                        <img :src="selectedImage" class="max-w-full h-auto rounded" alt="Selected image">
                    </div>

                    <webdraw-textarea 
                        ref="videoPrompt"
                        v-model="promptText"
                        placeholder="Describe how you want your video to look..."
                        rows="3"
                        class="w-full">
                    </webdraw-textarea>

                    <button @click="generateVideo" 
                            :disabled="isProcessing"
                            class="w-full bg-purple-500 text-white px-6 py-3 rounded-lg hover:bg-purple-600 disabled:bg-gray-400">
                        {{ isProcessing ? 'Processing...' : 'Generate Video' }}
                    </button>

                    <div v-if="isProcessing" class="w-full bg-gray-200 rounded-full h-2.5">
                        <div class="bg-blue-600 h-2.5 rounded-full" :style="{ width: progress + '%' }"></div>
                    </div>
                </div>
            </div>

            <!-- Distribution Section -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-semibold mb-4" style="font-family: 'Bricolage Grotesque', sans-serif;">Distribute Video</h2>
                <div class="space-y-4">
                    <div v-if="generatedVideo" class="mb-4">
                        <video controls class="w-full rounded">
                            <source :src="generatedVideo" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <h3 class="font-semibold mb-2" style="font-family: 'Bricolage Grotesque', sans-serif;">TikTok Accounts</h3>
                            <div class="mb-8 md:mb-3">
                                <button @click="selectAllTikTok" class="text-xs bg-purple-500 text-white hover:bg-purple-600 px-2 py-1 rounded-lg">Select All</button>
                            </div>
                            <div class="space-y-2">
                                <div v-for="(account, index) in tiktokAccounts" :key="'tiktok'+index" 
                                     class="flex items-center space-x-2">
                                    <input type="checkbox" v-model="account.selected" class="rounded">
                                    <span class="flex items-center">
                                        <svg class="h-5 w-5 mr-1" viewBox="0 0 24 24" fill="#000000"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/></svg>
                                        {{ account.username || 'TikTok Account ' + (index + 1) }}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-semibold mb-2" style="font-family: 'Bricolage Grotesque', sans-serif;">Instagram Accounts</h3>
                            <div class="mb-2">
                                <button @click="selectAllInstagram" class="text-xs bg-purple-500 text-white hover:bg-purple-600 px-2 py-1 rounded-lg">Select All</button>
                            </div>
                            <div class="space-y-2">
                                <div v-for="(account, index) in instagramAccounts" :key="'instagram'+index" 
                                     class="flex items-center space-x-2">
                                    <input type="checkbox" v-model="account.selected" class="rounded">
                                    <span class="flex items-center">
                                        <svg class="h-5 w-5 mr-1" viewBox="0 0 24 24" fill="#E4405F"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
                                        {{ account.username || 'Instagram Account ' + (index + 1) }}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <button @click="distributeVideo" 
                            :disabled="!generatedVideo || isDistributing"
                            class="w-full bg-purple-500 text-white px-6 py-3 rounded-lg hover:bg-purple-600 disabled:bg-gray-400">
                        {{ isDistributing ? 'Distributing...' : 'Distribute Video' }}
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Account Profile Modal -->
        <div v-if="showProfileModal" class="fixed inset-0 z-50 overflow-y-auto">
            <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div class="fixed inset-0 transition-opacity" @click="showProfileModal = false">
                    <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
                </div>
                <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                    <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                        <div class="sm:flex sm:items-start">
                            <div class="mt-3 text-center sm:mt-0 sm:text-left w-full">
                                <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4" style="font-family: 'Bricolage Grotesque', sans-serif;">Account Profile</h3>
                                
                                <div class="space-y-4">
                                    <div class="flex items-center space-x-4 mb-6">
                                        <div class="w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center overflow-hidden">
                                            <img v-if="userProfile.avatar" :src="userProfile.avatar" alt="Profile" class="w-full h-full object-cover">
                                            <svg v-else xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                            </svg>
                                        </div>
                                        <div>
                                            <h4 class="text-xl font-semibold" style="font-family: 'Bricolage Grotesque', sans-serif;">{{ userProfile.name || 'Your Name' }}</h4>
                                            <p class="text-gray-500">{{ userProfile.email || 'your.email@example.com' }}</p>
                                        </div>
                                    </div>
                                    
                                    <div class="space-y-3">
                                        <div>
                                            <label for="profileName" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                                            <input type="text" id="profileName" v-model="userProfile.name" class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        </div>
                                        
                                        <div>
                                            <label for="profileEmail" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                                            <input type="email" id="profileEmail" v-model="userProfile.email" class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                        </div>
                                        
                                        <div>
                                            <label for="profileAvatar" class="block text-sm font-medium text-gray-700 mb-1">Profile Picture</label>
                                            <input type="file" id="profileAvatar" @change="updateProfilePicture" class="hidden" accept="image/*">
                                            <button @click="$refs.profileAvatar.click()" class="w-full bg-gray-100 border border-gray-300 rounded-md px-3 py-2 text-sm text-gray-700 hover:bg-gray-200">
                                                Change Profile Picture
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                        <button @click="saveAccountConfig" class="w-full inline-flex justify-center rounded-lg border border-transparent shadow-sm px-4 py-2 bg-purple-500 text-base font-medium text-white hover:bg-purple-600 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm">
                            Save Changes
                        </button>
                        <button @click="showProfileModal = false" class="mt-3 w-full inline-flex justify-center rounded-lg border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- License Management Modal -->
        <div v-if="showLicenseModal" class="fixed inset-0 z-50 overflow-y-auto">
            <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div class="fixed inset-0 transition-opacity" @click="showLicenseModal = false">
                    <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
                </div>
                <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                    <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                        <div class="sm:flex sm:items-start">
                            <div class="mt-3 text-center sm:mt-0 sm:text-left w-full">
                                <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4" style="font-family: 'Bricolage Grotesque', sans-serif;">Account Configuration</h3>
                                
                                <div class="space-y-4">
                                    <div class="border rounded-lg p-4">
                                        <p class="text-sm text-gray-600 mb-2">Current License: <span class="font-semibold">{{ license.type || 'None' }}</span></p>
                                        <p class="text-sm text-gray-600 mb-2">Features: <span class="font-semibold">{{ license.features || 'Limited' }}</span></p>
                                        <p class="text-sm text-gray-600 mb-2">Status: <span class="font-semibold" :class="license.active ? 'text-green-600' : 'text-red-600'">{{ license.active ? 'Active' : 'Inactive' }}</span></p>
                                        <p v-if="license.expiryDate" class="text-sm text-gray-600">Expires: <span class="font-semibold">{{ license.expiryDate }}</span></p>
                                    </div>
                                    
                                    <div class="space-y-2">
                                        <label for="licenseKey" class="block text-sm font-medium text-gray-700">Enter License Key</label>
                                        <input type="text" id="licenseKey" v-model="licenseKey" placeholder="XXXX-XXXX-XXXX-XXXX" class="w-full border rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    </div>
                                    
                                    <button @click="activateLicense" :disabled="!licenseKey || isActivatingLicense" class="w-full bg-purple-500 text-white px-4 py-2 rounded-md hover:bg-purple-600 disabled:bg-gray-400">
                                        {{ isActivatingLicense ? 'Activating...' : 'Activate License' }}
                                    </button>
                                    
                                    <div class="mt-6 text-center">
                                        <button @click="showPlansModal = true" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600">
                                            Buy License
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                        <button @click="showPlansModal = false" class="w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:w-auto sm:text-sm">
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Plans Modal -->
        <div v-if="showPlansModal" class="fixed inset-0 z-50 overflow-y-auto">
            <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div class="fixed inset-0 transition-opacity" @click="showPlansModal = false">
                    <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
                </div>
                <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full">
                    <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                        <div class="sm:flex sm:items-start">
                            <div class="mt-3 text-center sm:mt-0 sm:text-left w-full">
                                <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4 text-center">Choose Your Plan</h3>
                                
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <!-- Basic Plan -->
                                    <div class="border rounded-lg p-6 hover:shadow-lg transition-shadow">
                                        <h4 class="text-xl font-bold text-gray-800 mb-2" style="font-family: 'Bricolage Grotesque', sans-serif;">Basic</h4>
                                        <p class="text-3xl font-bold text-gray-900 mb-4">$9.99<span class="text-sm font-normal text-gray-600">/month</span></p>
                                        <ul class="space-y-2 mb-6">
                                            <li class="flex items-center"><svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Up to 3 social accounts</li>
                                            <li class="flex items-center"><svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>720p video quality</li>
                                            <li class="flex items-center"><svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>50 videos per month</li>
                                            <li class="flex items-center text-gray-400"><svg class="h-5 w-5 text-gray-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>No batch processing</li>
                                            <li class="flex items-center text-gray-400"><svg class="h-5 w-5 text-gray-400 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>Basic analytics</li>
                                        </ul>
                                        <button @click="purchasePlan('Basic')" class="w-full bg-purple-500 text-white py-2 rounded-lg hover:bg-purple-600">Get Started</button>
                                    </div>
                                    
                                    <!-- Premium Plan -->
                                    <div class="border rounded-lg p-6 bg-blue-50 hover:shadow-lg transition-shadow relative">
                                        <div class="absolute top-0 right-0 bg-blue-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg">POPULAR</div>
                                        <h4 class="text-xl font-bold text-gray-800 mb-2" style="font-family: 'Bricolage Grotesque', sans-serif;">Premium</h4>
                                        <p class="text-3xl font-bold text-gray-900 mb-4">$19.99<span class="text-sm font-normal text-gray-600">/month</span></p>
                                        <ul class="space-y-2 mb-6">
                                            <li class="flex items-center"><svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Up to 7 social accounts</li>
                                            <li class="flex items-center"><svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>1080p video quality</li>
                                            <li class="flex items-center"><svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>200 videos per month</li>
                                            <li class="flex items-center"><svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Basic batch processing</li>
                                            <li class="flex items-center"><svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Advanced analytics</li>
                                        </ul>
                                        <button @click="purchasePlan('Premium')" class="w-full bg-purple-500 text-white py-2 rounded-lg hover:bg-purple-600">Get Started</button>
                                    </div>
                                    
                                    <!-- Pro Plan -->
                                    <div class="border rounded-lg p-6 hover:shadow-lg transition-shadow">
                                        <h4 class="text-xl font-bold text-gray-800 mb-2" style="font-family: 'Bricolage Grotesque', sans-serif;">Pro</h4>
                                        <p class="text-3xl font-bold text-gray-900 mb-4">$39.99<span class="text-sm font-normal text-gray-600">/month</span></p>
                                        <ul class="space-y-2 mb-6">
                                            <li class="flex items-center"><svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Up to 20 social accounts</li>
                                            <li class="flex items-center"><svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>4K video quality</li>
                                            <li class="flex items-center"><svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Unlimited videos</li>
                                            <li class="flex items-center"><svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Advanced batch processing</li>
                                            <li class="flex items-center"><svg class="h-5 w-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Premium analytics & support</li>
                                        </ul>
                                        <button @click="purchasePlan('Pro')" class="w-full bg-purple-600 text-white py-2 rounded-lg hover:bg-purple-700">Get Started</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                        <button @click="showLicenseModal = false" class="w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:w-auto sm:text-sm">
                            Close
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        
        <!-- Account Configuration Modal -->
        <div v-if="showConfigModal" class="fixed inset-0 z-50 overflow-y-auto">
            <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
                <div class="fixed inset-0 transition-opacity" @click="showConfigModal = false">
                    <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
                </div>
                <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                    <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                        <div class="sm:flex sm:items-start">
                            <div class="mt-3 text-center sm:mt-0 sm:text-left w-full">
                                <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4">Account Configuration</h3>
                                
                                <!-- Tabs -->
                                <div class="border-b border-gray-200 mb-4">
                                    <nav class="-mb-px flex">
                                        <button @click="activeTab = 'tiktok'" class="py-2 px-4 border-b-2 font-medium text-sm" :class="activeTab === 'tiktok' ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'">
                                            TikTok Accounts
                                        </button>
                                        <button @click="activeTab = 'instagram'" class="ml-8 py-2 px-4 border-b-2 font-medium text-sm" :class="activeTab === 'instagram' ? 'border-purple-500 text-purple-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'">
                                            Instagram Accounts
                                        </button>
                                    </nav>
                                </div>
                                
                                <!-- TikTok Accounts Tab -->
                                <div v-if="activeTab === 'tiktok'" class="space-y-4">
                                    <div v-for="(account, index) in tiktokAccounts" :key="'config-tiktok-'+index" class="flex items-center space-x-2">
                                        <input type="text" v-model="account.username" placeholder="TikTok username" class="flex-1 border rounded px-2 py-1">
                                        <button @click="authenticateTikTokAccount(index)" :disabled="account.isAuthenticating || account.isAuthenticated" class="px-2 py-1 bg-purple-500 text-white rounded-lg text-sm" :class="{'opacity-50': account.isAuthenticating || account.isAuthenticated}">
                                            <span class="flex items-center">
                                                <svg class="h-4 w-4 mr-1" viewBox="0 0 24 24" fill="#ffffff"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/></svg>
                                                {{ account.isAuthenticated ? 'Connected' : (account.isAuthenticating ? 'Connecting...' : 'Connect TikTok') }}
                                            </span>
                                        </button>
                                        <button @click="removeTikTokAccount(index)" class="text-red-500">×</button>
                                    </div>
                                    <button @click="addTikTokAccount" class="text-purple-500 text-sm" :disabled="tiktokAccounts.length >= 10">+ Add TikTok Account</button>
                                </div>
                                
                                <!-- Instagram Accounts Tab -->
                                <div v-if="activeTab === 'instagram'" class="space-y-4">
                                    <div v-for="(account, index) in instagramAccounts" :key="'config-instagram-'+index" class="flex items-center space-x-2">
                                        <input type="text" v-model="account.username" placeholder="Instagram username" class="flex-1 border rounded px-2 py-1">
                                        <button @click="authenticateInstagramAccount(index)" :disabled="account.isAuthenticating || account.isAuthenticated" class="px-2 py-1 bg-purple-500 text-white rounded-lg text-sm" :class="{'opacity-50': account.isAuthenticating || account.isAuthenticated}">
                                            <span class="flex items-center">
                                                <svg class="h-4 w-4 mr-1" viewBox="0 0 24 24" fill="#ffffff"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>
                                                {{ account.isAuthenticated ? 'Connected' : (account.isAuthenticating ? 'Connecting...' : 'Connect Instagram') }}
                                            </span>
                                        </button>
                                        <button @click="removeInstagramAccount(index)" class="text-red-500">×</button>
                                    </div>
                                    <button @click="addInstagramAccount" class="text-purple-500 text-sm" :disabled="instagramAccounts.length >= 10">+ Add Instagram Account</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                        <button @click="saveAccountConfig" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm">
                            Save
                        </button>
                        <button @click="showConfigModal = false" class="mt-3 w-full inline-flex justify-center rounded-lg border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <style>
        body {
            font-family: 'Bricolage Grotesque', sans-serif;
            transition: background-color 0.3s ease;
            padding-top: 50px; /* Add padding for the fixed navbar */
        }
        .dark .bg-white {
            background-color: #1f2937;
        }
        .dark .bg-gray-50 {
            background-color: #374151;
        }
        .dark body {
            color: #f3f4f6;
        }
    </style>

    <script type="module">
        import { SDK } from "https://webdraw.com/webdraw-sdk@v1";
        const WebdrawTextarea = window.WebdrawTextarea || { template: '<textarea :value="modelValue" @input="$emit(\'update:modelValue\', $event.target.value)" v-bind="$attrs"></textarea>' };

        const { createApp, ref, onMounted } = Vue;

        createApp({
            components: {
                'webdraw-textarea': WebdrawTextarea
            },
            setup() {
                const sdk = ref(null);
                const fileInput = ref(null);
                const videoPrompt = ref(null);
                const selectedImage = ref(null);
                const generatedVideo = ref(null);
                const isProcessing = ref(false);
                const isDistributing = ref(false);
                const progress = ref(0);
                const progressInterval = ref(null);
                const promptText = ref('');
                const isDragging = ref(false);

                const tiktokAccounts = ref(Array(3).fill().map(() => ({ 
                    selected: false, 
                    username: '', 
                    isAuthenticated: false,
                    isAuthenticating: false
                })));
                const instagramAccounts = ref(Array(3).fill().map(() => ({ 
                    selected: false, 
                    username: '', 
                    isAuthenticated: false,
                    isAuthenticating: false
                })));
                const showConfigModal = ref(false);
                const sidebarOpen = ref(false);
                const activeTab = ref('tiktok');

                const showLicenseModal = ref(false);
                const licenseKey = ref('');
                const isActivatingLicense = ref(false);
                const license = ref({
                    type: null, active: false, expiryDate: null,
                    features: null
                });
                
                const showProfileModal = ref(false);
                const userProfile = ref({
                    name: '',
                    email: '',
                    avatar: null
                });
                const darkMode = ref(false);

                onMounted(async () => {
                    sdk.value = SDK;
                    // Load saved accounts from localStorage if available
                    const savedTikTokAccounts = localStorage.getItem('tiktokAccounts');
                    const savedInstagramAccounts = localStorage.getItem('instagramAccounts');
                    
                    if (savedTikTokAccounts) {
                        tiktokAccounts.value = JSON.parse(savedTikTokAccounts);
                    }
                    
                    if (savedInstagramAccounts) {
                        instagramAccounts.value = JSON.parse(savedInstagramAccounts);
                    }
                    
                    // Load saved license from localStorage if available
                    const savedLicense = localStorage.getItem('license');
                    if (savedLicense) {
                        license.value = JSON.parse(savedLicense);
                    }
                    
                    // Load saved profile from localStorage if available
                    const savedProfile = localStorage.getItem('userProfile');
                    if (savedProfile) {
                        userProfile.value = JSON.parse(savedProfile);
                    }
                    
                    // Check for saved dark mode preference
                    const savedDarkMode = localStorage.getItem('darkMode');
                    if (savedDarkMode) {
                        darkMode.value = JSON.parse(savedDarkMode);
                        if (darkMode.value) {
                            document.documentElement.classList.add('dark');
                            document.body.classList.add('bg-gray-900');
                            document.body.classList.remove('bg-gray-100');
                        }
                    }
                });

                const convertFileToBase64 = async (file) => {
                    return new Promise((resolve, reject) => {
                        const reader = new FileReader();
                        reader.onload = () => resolve(reader.result);
                        reader.onerror = reject;
                        reader.readAsDataURL(file);
                    });
                };

                const handleFileSelect = async (event) => {
                    const file = event.target.files[0];
                    if (file) {
                        selectedImage.value = await convertFileToBase64(file);
                    }
                };

                const handleDrop = async (event) => {
                    isDragging.value = false;
                    const file = event.dataTransfer.files[0];
                    if (file && file.type.startsWith('image/')) {
                        selectedImage.value = await convertFileToBase64(file);
                    }
                };

                const startProgress = () => {
                    progress.value = 0;
                    const totalTime = 150;
                    const increment = 100 / totalTime;
                    let elapsed = 0;

                    progressInterval.value = setInterval(() => {
                        elapsed++;
                        progress.value += increment;
                        if (progress.value >= 100 || elapsed >= totalTime) {
                            progress.value = 100;
                            clearInterval(progressInterval.value);
                        }
                    }, 1000);
                };

                const generateVideo = async () => {
                    if (!selectedImage.value) {
                        alert('Please select an image first');
                        return;
                    }

                    isProcessing.value = true;
                    startProgress();

                    try {
                        const processedInput = await videoPrompt.value.getProcessedContent(promptText.value);
                        const response = await sdk.value.ai.generateVideo({
                            model: 'vidu:img2video',
                            ...processedInput,
                            image: selectedImage.value,
                            providerOptions: { 
                                vidu: { 
                                    model: "vidu2.0", 
                                    duration: 4, 
                                    resolution: "720p" 
                                } 
                            }
                        });

                        generatedVideo.value = response.video;
                    } catch (error) {
                        console.error('Error generating video:', error);
                        alert('Failed to generate video. Please try again.');
                    } finally {
                        isProcessing.value = false;
                        clearInterval(progressInterval.value);
                        progress.value = 100;
                    }
                };

                const distributeVideo = async () => {
                    isDistributing.value = true;
                    // Simulate distribution
                    setTimeout(() => {
                        isDistributing.value = false;
                        alert('Video distributed successfully!');
                    }, 2000);
                };

                const addTikTokAccount = () => {
                    if (tiktokAccounts.value.length < 10) {
                        tiktokAccounts.value.push({ 
                            selected: false, 
                            username: '', 
                            isAuthenticated: false,
                            isAuthenticating: false
                        });
                    }
                };
                
                const removeTikTokAccount = (index) => {
                    tiktokAccounts.value.splice(index, 1);
                };
                
                const authenticateTikTokAccount = (index) => {
                    const account = tiktokAccounts.value[index];
                    account.isAuthenticating = true;

                    // Open TikTok OAuth popup
                    const width = 600;
                    const height = 700;
                    const left = window.screen.width / 2 - width / 2;
                    const top = window.screen.height / 2 - height / 2;
                    
                    // This would be your actual TikTok OAuth URL in production
                    const tiktokAuthUrl = `https://www.tiktok.com/auth/authorize/?client_key=YOUR_CLIENT_KEY&scope=user.info.basic,video.upload&response_type=code&redirect_uri=${encodeURIComponent(window.location.origin + '/tiktok-callback')}`;
                    
                    const authWindow = window.open(
                        tiktokAuthUrl,
                        'TikTok Authorization',
                        `width=${width},height=${height},left=${left},top=${top}`
                    );
                    
                    // For demo purposes, we'll simulate a successful auth after a delay
                    // In a real app, you would listen for a message from the popup window
                    // when the OAuth flow completes
                    const checkInterval = setInterval(() => {
                        if (authWindow.closed) {
                            clearInterval(checkInterval);
                            account.isAuthenticated = true;
                            account.isAuthenticating = false;
                            // In a real app, you would store the access token here
                        }
                    }, 500);
                };
                
                const addInstagramAccount = () => {
                    if (instagramAccounts.value.length < 10) {
                        instagramAccounts.value.push({ 
                            selected: false, 
                            username: '', 
                            isAuthenticated: false,
                            isAuthenticating: false
                        });
                    }
                };
                
                const removeInstagramAccount = (index) => {
                    instagramAccounts.value.splice(index, 1);
                };
                
                const authenticateInstagramAccount = (index) => {
                    const account = instagramAccounts.value[index];
                    account.isAuthenticating = true;

                    // Open Instagram OAuth popup
                    const width = 600;
                    const height = 700;
                    const left = window.screen.width / 2 - width / 2;
                    const top = window.screen.height / 2 - height / 2;
                    
                    // This would be your actual Instagram OAuth URL in production
                    const instagramAuthUrl = `https://api.instagram.com/oauth/authorize?client_id=YOUR_CLIENT_ID&redirect_uri=${encodeURIComponent(window.location.origin + '/instagram-callback')}&scope=user_profile,user_media&response_type=code`;
                    
                    const authWindow = window.open(
                        instagramAuthUrl,
                        'Instagram Authorization',
                        `width=${width},height=${height},left=${left},top=${top}`
                    );
                    
                    // For demo purposes, we'll simulate a successful auth after a delay
                    // In a real app, you would listen for a message from the popup window
                    // when the OAuth flow completes
                    const checkInterval = setInterval(() => {
                        if (authWindow.closed) {
                            clearInterval(checkInterval);
                            account.isAuthenticated = true;
                            account.isAuthenticating = false;
                            // In a real app, you would store the access token here
                        }
                    }, 500);
                };
                
                const saveAccountConfig = () => {
                    localStorage.setItem('tiktokAccounts', JSON.stringify(tiktokAccounts.value));
                    localStorage.setItem('instagramAccounts', JSON.stringify(instagramAccounts.value));
                    showConfigModal.value = false;
                };

                const toggleSidebar = () => {
                    sidebarOpen.value = !sidebarOpen.value;
                };

                const showPlansModal = ref(false);
                const activateLicense = () => {
                    if (!licenseKey.value) return;
                    
                    isActivatingLicense.value = true;
                    
                    // Simulate license activation
                    setTimeout(() => {
                        license.value = {
                            type: 'Professional',
                            active: true,
                            expiryDate: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000).toLocaleDateString(),
                            features: 'Full Access'
                        };
                        localStorage.setItem('license', JSON.stringify(license.value));
                        isActivatingLicense.value = false;
                    }, 1500);
                };

                const toggleDarkMode = () => {
                    if (darkMode.value) {
                        document.documentElement.classList.add('dark');
                        document.body.classList.add('bg-gray-900');
                    } else {
                        document.documentElement.classList.remove('dark');
                        document.body.classList.remove('bg-gray-900');
                    }
                    localStorage.setItem('darkMode', JSON.stringify(darkMode.value));
                };

                const updateProfilePicture = async (event) => {
                    const file = event.target.files[0];
                    if (file) {
                        try {
                            const base64Image = await convertFileToBase64(file);
                            userProfile.value.avatar = base64Image;
                        } catch (error) {
                            console.error('Error converting image:', error);
                            alert('Failed to update profile picture. Please try again.');
                        }
                    }
                };
                
                const saveProfile = () => {
                    localStorage.setItem('userProfile', JSON.stringify(userProfile.value));
                    showProfileModal.value = false;
                };

                const selectAllTikTok = () => {
                    tiktokAccounts.value.forEach(account => {
                        account.selected = true;
                    });
                };
                
                const selectAllInstagram = () => {
                    instagramAccounts.value.forEach(account => {
                        account.selected = true;
                    });
                };

                const purchasePlan = (planType) => {
                    // Simulate purchase process
                    const planFeatures = {
                        'Basic': '3 accounts, 720p quality',
                        'Premium': '7 accounts, 1080p quality',
                        'Pro': '20 accounts, 4K quality'
                    };
                    
                    setTimeout(() => {
                        license.value = {
                            type: planType,
                            active: true,
                            expiryDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toLocaleDateString(),
                            features: planFeatures[planType]
                        };
                        localStorage.setItem('license', JSON.stringify(license.value));
                        showPlansModal.value = false;
                        showLicenseModal.value = false;
                        alert(`Thank you for purchasing the ${planType} plan!`);
                    }, 1500);
                };

                return {
                    fileInput,
                    videoPrompt,
                    selectedImage,
                    generatedVideo,
                    isProcessing,
                    isDistributing,
                    progress,
                    promptText,
                    isDragging,
                    tiktokAccounts,
                    instagramAccounts,
                    showConfigModal,
                    activeTab,
                    showLicenseModal,
                    licenseKey,
                    isActivatingLicense,
                    license,
                    showPlansModal,
                    sidebarOpen,
                    showProfileModal,
                    userProfile,
                    darkMode,
                    toggleDarkMode,
                    updateProfilePicture,
                    handleFileSelect,
                    handleDrop,
                    generateVideo,
                    distributeVideo,
                    addTikTokAccount,
                    removeTikTokAccount,
                    authenticateTikTokAccount,
                    addInstagramAccount,
                    removeInstagramAccount,
                    authenticateInstagramAccount,
                    saveAccountConfig,
                    toggleSidebar,
                    activateLicense,
                    purchasePlan,
                    selectAllTikTok,
                    selectAllInstagram,
                    saveProfile
                };
            }
        }).mount('#app');
    </script>
</body>
</html>